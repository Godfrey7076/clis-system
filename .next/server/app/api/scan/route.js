"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/scan/route";
exports.ids = ["app/api/scan/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ZhuanZ_clis_system_dashboard_app_api_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/scan/route.ts */ \"(rsc)/./app/api/scan/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/scan/route\",\n        pathname: \"/api/scan\",\n        filename: \"route\",\n        bundlePath: \"app/api/scan/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ZhuanZ\\\\clis-system\\\\dashboard\\\\app\\\\api\\\\scan\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ZhuanZ_clis_system_dashboard_app_api_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/scan/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzY2FuJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzY2FuJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2NhbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNaaHVhblolNUNjbGlzLXN5c3RlbSU1Q2Rhc2hib2FyZCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDWmh1YW5aJTVDY2xpcy1zeXN0ZW0lNUNkYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGFzaGJvYXJkLz9kYzYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFpodWFuWlxcXFxjbGlzLXN5c3RlbVxcXFxkYXNoYm9hcmRcXFxcYXBwXFxcXGFwaVxcXFxzY2FuXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zY2FuL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2NhblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2Nhbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFpodWFuWlxcXFxjbGlzLXN5c3RlbVxcXFxkYXNoYm9hcmRcXFxcYXBwXFxcXGFwaVxcXFxzY2FuXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zY2FuL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/scan/route.ts":
/*!*******************************!*\
  !*** ./app/api/scan/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_faceRecognition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/faceRecognition */ \"(rsc)/./lib/faceRecognition.ts\");\n\n\n\n\nconst faceRecognition = _lib_faceRecognition__WEBPACK_IMPORTED_MODULE_3__.FaceRecognition.getInstance();\nasync function POST(request) {\n    try {\n        const { faceEncoding } = await request.json();\n        if (!faceEncoding) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Face encoding is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate face encoding format\n        if (!faceRecognition.validateFaceEncoding(faceEncoding)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid face encoding format\"\n            }, {\n                status: 400\n            });\n        }\n        // Find users with valid access (not expired)\n        const users = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.userProfile.findMany({\n            where: {\n                OR: [\n                    {\n                        expiresAt: null\n                    },\n                    {\n                        expiresAt: {\n                            gt: new Date()\n                        }\n                    } // Not expired visitors\n                ]\n            }\n        });\n        // Perform face matching\n        const match = faceRecognition.findBestMatch(faceEncoding, users, 0.6);\n        let matchedUser = null;\n        let confidence = 0;\n        let distance = 0;\n        if (match) {\n            matchedUser = match.user;\n            confidence = match.confidence;\n            distance = match.distance;\n        }\n        // Determine status based on user type and match\n        let status;\n        if (matchedUser?.userType === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserType.VISITOR) {\n            status = _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.VISITOR;\n        } else if (matchedUser) {\n            status = _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.IDENTIFIED;\n        } else {\n            status = _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.DENIED;\n        }\n        const scanEvent = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.scanEvent.create({\n            data: {\n                userId: matchedUser?.id,\n                status,\n                confidence: matchedUser ? confidence : null\n            },\n            include: {\n                user: true\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            status,\n            user: matchedUser,\n            userType: matchedUser?.userType,\n            confidence: matchedUser ? Math.round(confidence * 100) / 100 : null,\n            distance: matchedUser ? Math.round(distance * 1000) / 1000 : null,\n            matchQuality: matchedUser ? faceRecognition.getMatchQuality(confidence) : null,\n            eventId: scanEvent.id,\n            message: matchedUser ? `Identity verified: ${matchedUser.name} (${faceRecognition.getMatchQuality(confidence)} match)` : \"No matching identity found\"\n        });\n    } catch (error) {\n        console.error(\"Scan error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Scan failed\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    try {\n        const events = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.scanEvent.findMany({\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        cardId: true,\n                        name: true,\n                        email: true,\n                        userType: true\n                    }\n                }\n            },\n            orderBy: {\n                timestamp: \"desc\"\n            },\n            take: 50\n        });\n        // Calculate statistics\n        const totalScans = events.length;\n        const identified = events.filter((e)=>e.status === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.IDENTIFIED).length;\n        const denied = events.filter((e)=>e.status === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.DENIED).length;\n        const visitors = events.filter((e)=>e.status === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ScanStatus.VISITOR).length;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            events,\n            statistics: {\n                totalScans,\n                identified,\n                denied,\n                visitors\n            }\n        });\n    } catch (error) {\n        console.error(\"Get events error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch events\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NjYW4vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1RDtBQUNsQjtBQUNnQjtBQUNFO0FBRXZELE1BQU1LLGtCQUFrQkQsaUVBQWVBLENBQUNFLFdBQVc7QUFFNUMsZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsTUFBTUQsUUFBUUUsSUFBSTtRQUUzQyxJQUFJLENBQUNELGNBQWM7WUFDakIsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBNEIsR0FDckM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdDQUFnQztRQUNoQyxJQUFJLENBQUNQLGdCQUFnQlEsb0JBQW9CLENBQUNKLGVBQWU7WUFDdkQsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBK0IsR0FDeEM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDZDQUE2QztRQUM3QyxNQUFNRSxRQUFRLE1BQU1iLCtDQUFNQSxDQUFDYyxXQUFXLENBQUNDLFFBQVEsQ0FBQztZQUM5Q0MsT0FBTztnQkFDTEMsSUFBSTtvQkFDRjt3QkFBRUMsV0FBVztvQkFBSztvQkFDbEI7d0JBQUVBLFdBQVc7NEJBQUVDLElBQUksSUFBSUM7d0JBQU87b0JBQUUsRUFBRSx1QkFBdUI7aUJBQzFEO1lBQ0g7UUFDRjtRQUVBLHdCQUF3QjtRQUN4QixNQUFNQyxRQUFRakIsZ0JBQWdCa0IsYUFBYSxDQUFDZCxjQUFjSyxPQUFPO1FBRWpFLElBQUlVLGNBQWM7UUFDbEIsSUFBSUMsYUFBYTtRQUNqQixJQUFJQyxXQUFXO1FBRWYsSUFBSUosT0FBTztZQUNURSxjQUFjRixNQUFNSyxJQUFJO1lBQ3hCRixhQUFhSCxNQUFNRyxVQUFVO1lBQzdCQyxXQUFXSixNQUFNSSxRQUFRO1FBQzNCO1FBRUEsZ0RBQWdEO1FBQ2hELElBQUlkO1FBQ0osSUFBSVksYUFBYUksYUFBYTFCLG9EQUFRQSxDQUFDMkIsT0FBTyxFQUFFO1lBQzlDakIsU0FBU1Qsc0RBQVVBLENBQUMwQixPQUFPO1FBQzdCLE9BQU8sSUFBSUwsYUFBYTtZQUN0QlosU0FBU1Qsc0RBQVVBLENBQUMyQixVQUFVO1FBQ2hDLE9BQU87WUFDTGxCLFNBQVNULHNEQUFVQSxDQUFDNEIsTUFBTTtRQUM1QjtRQUVBLE1BQU1DLFlBQVksTUFBTS9CLCtDQUFNQSxDQUFDK0IsU0FBUyxDQUFDQyxNQUFNLENBQUM7WUFDOUNDLE1BQU07Z0JBQ0pDLFFBQVFYLGFBQWFZO2dCQUNyQnhCO2dCQUNBYSxZQUFZRCxjQUFjQyxhQUFhO1lBQ3pDO1lBQ0FZLFNBQVM7Z0JBQ1BWLE1BQU07WUFDUjtRQUNGO1FBRUEsT0FBTzNCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDdkI0QixTQUFTO1lBQ1QxQjtZQUNBZSxNQUFNSDtZQUNOSSxVQUFVSixhQUFhSTtZQUN2QkgsWUFBWUQsY0FBY2UsS0FBS0MsS0FBSyxDQUFDZixhQUFhLE9BQU8sTUFBTTtZQUMvREMsVUFBVUYsY0FBY2UsS0FBS0MsS0FBSyxDQUFDZCxXQUFXLFFBQVEsT0FBTztZQUM3RGUsY0FBY2pCLGNBQWNuQixnQkFBZ0JxQyxlQUFlLENBQUNqQixjQUFjO1lBQzFFa0IsU0FBU1gsVUFBVUksRUFBRTtZQUNyQlEsU0FBU3BCLGNBQ0wsQ0FBQyxtQkFBbUIsRUFBRUEsWUFBWXFCLElBQUksQ0FBQyxFQUFFLEVBQUV4QyxnQkFBZ0JxQyxlQUFlLENBQUNqQixZQUFZLE9BQU8sQ0FBQyxHQUMvRjtRQUNOO0lBQ0YsRUFBRSxPQUFPZCxPQUFPO1FBQ2RtQyxRQUFRbkMsS0FBSyxDQUFDLGVBQWVBO1FBQzdCLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBYyxHQUN2QjtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVtQztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsU0FBUyxNQUFNL0MsK0NBQU1BLENBQUMrQixTQUFTLENBQUNoQixRQUFRLENBQUM7WUFDN0NxQixTQUFTO2dCQUNQVixNQUFNO29CQUNKc0IsUUFBUTt3QkFDTmIsSUFBSTt3QkFDSmMsUUFBUTt3QkFDUkwsTUFBTTt3QkFDTk0sT0FBTzt3QkFDUHZCLFVBQVU7b0JBQ1o7Z0JBQ0Y7WUFDRjtZQUNBd0IsU0FBUztnQkFDUEMsV0FBVztZQUNiO1lBQ0FDLE1BQU07UUFDUjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNQyxhQUFhUCxPQUFPUSxNQUFNO1FBQ2hDLE1BQU1DLGFBQWFULE9BQU9VLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRS9DLE1BQU0sS0FBS1Qsc0RBQVVBLENBQUMyQixVQUFVLEVBQUUwQixNQUFNO1FBQ2hGLE1BQU1JLFNBQVNaLE9BQU9VLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRS9DLE1BQU0sS0FBS1Qsc0RBQVVBLENBQUM0QixNQUFNLEVBQUV5QixNQUFNO1FBQ3hFLE1BQU1LLFdBQVdiLE9BQU9VLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRS9DLE1BQU0sS0FBS1Qsc0RBQVVBLENBQUMwQixPQUFPLEVBQUUyQixNQUFNO1FBRTNFLE9BQU94RCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3ZCc0M7WUFDQWMsWUFBWTtnQkFDVlA7Z0JBQ0FFO2dCQUNBRztnQkFDQUM7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPbEQsT0FBTztRQUNkbUMsUUFBUW5DLEtBQUssQ0FBQyxxQkFBcUJBO1FBQ25DLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBeUIsR0FDbEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXNoYm9hcmQvLi9hcHAvYXBpL3NjYW4vcm91dGUudHM/N2FiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSdcclxuaW1wb3J0IHsgVXNlclR5cGUsIFNjYW5TdGF0dXMgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuaW1wb3J0IHsgRmFjZVJlY29nbml0aW9uIH0gZnJvbSAnQC9saWIvZmFjZVJlY29nbml0aW9uJ1xyXG5cclxuY29uc3QgZmFjZVJlY29nbml0aW9uID0gRmFjZVJlY29nbml0aW9uLmdldEluc3RhbmNlKClcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZmFjZUVuY29kaW5nIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG5cclxuICAgIGlmICghZmFjZUVuY29kaW5nKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRmFjZSBlbmNvZGluZyBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGZhY2UgZW5jb2RpbmcgZm9ybWF0XHJcbiAgICBpZiAoIWZhY2VSZWNvZ25pdGlvbi52YWxpZGF0ZUZhY2VFbmNvZGluZyhmYWNlRW5jb2RpbmcpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBmYWNlIGVuY29kaW5nIGZvcm1hdCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgdXNlcnMgd2l0aCB2YWxpZCBhY2Nlc3MgKG5vdCBleHBpcmVkKVxyXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlclByb2ZpbGUuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIE9SOiBbXHJcbiAgICAgICAgICB7IGV4cGlyZXNBdDogbnVsbCB9LCAvLyBQZXJtYW5lbnQgdXNlcnNcclxuICAgICAgICAgIHsgZXhwaXJlc0F0OiB7IGd0OiBuZXcgRGF0ZSgpIH0gfSAvLyBOb3QgZXhwaXJlZCB2aXNpdG9yc1xyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQZXJmb3JtIGZhY2UgbWF0Y2hpbmdcclxuICAgIGNvbnN0IG1hdGNoID0gZmFjZVJlY29nbml0aW9uLmZpbmRCZXN0TWF0Y2goZmFjZUVuY29kaW5nLCB1c2VycywgMC42KVxyXG5cclxuICAgIGxldCBtYXRjaGVkVXNlciA9IG51bGxcclxuICAgIGxldCBjb25maWRlbmNlID0gMFxyXG4gICAgbGV0IGRpc3RhbmNlID0gMFxyXG5cclxuICAgIGlmIChtYXRjaCkge1xyXG4gICAgICBtYXRjaGVkVXNlciA9IG1hdGNoLnVzZXJcclxuICAgICAgY29uZmlkZW5jZSA9IG1hdGNoLmNvbmZpZGVuY2VcclxuICAgICAgZGlzdGFuY2UgPSBtYXRjaC5kaXN0YW5jZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERldGVybWluZSBzdGF0dXMgYmFzZWQgb24gdXNlciB0eXBlIGFuZCBtYXRjaFxyXG4gICAgbGV0IHN0YXR1czogU2NhblN0YXR1c1xyXG4gICAgaWYgKG1hdGNoZWRVc2VyPy51c2VyVHlwZSA9PT0gVXNlclR5cGUuVklTSVRPUikge1xyXG4gICAgICBzdGF0dXMgPSBTY2FuU3RhdHVzLlZJU0lUT1JcclxuICAgIH0gZWxzZSBpZiAobWF0Y2hlZFVzZXIpIHtcclxuICAgICAgc3RhdHVzID0gU2NhblN0YXR1cy5JREVOVElGSUVEXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdGF0dXMgPSBTY2FuU3RhdHVzLkRFTklFRFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNjYW5FdmVudCA9IGF3YWl0IHByaXNtYS5zY2FuRXZlbnQuY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHVzZXJJZDogbWF0Y2hlZFVzZXI/LmlkLFxyXG4gICAgICAgIHN0YXR1cyxcclxuICAgICAgICBjb25maWRlbmNlOiBtYXRjaGVkVXNlciA/IGNvbmZpZGVuY2UgOiBudWxsLFxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgdXNlcjogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHN0YXR1cyxcclxuICAgICAgdXNlcjogbWF0Y2hlZFVzZXIsXHJcbiAgICAgIHVzZXJUeXBlOiBtYXRjaGVkVXNlcj8udXNlclR5cGUsXHJcbiAgICAgIGNvbmZpZGVuY2U6IG1hdGNoZWRVc2VyID8gTWF0aC5yb3VuZChjb25maWRlbmNlICogMTAwKSAvIDEwMCA6IG51bGwsXHJcbiAgICAgIGRpc3RhbmNlOiBtYXRjaGVkVXNlciA/IE1hdGgucm91bmQoZGlzdGFuY2UgKiAxMDAwKSAvIDEwMDAgOiBudWxsLFxyXG4gICAgICBtYXRjaFF1YWxpdHk6IG1hdGNoZWRVc2VyID8gZmFjZVJlY29nbml0aW9uLmdldE1hdGNoUXVhbGl0eShjb25maWRlbmNlKSA6IG51bGwsXHJcbiAgICAgIGV2ZW50SWQ6IHNjYW5FdmVudC5pZCxcclxuICAgICAgbWVzc2FnZTogbWF0Y2hlZFVzZXJcclxuICAgICAgICA/IGBJZGVudGl0eSB2ZXJpZmllZDogJHttYXRjaGVkVXNlci5uYW1lfSAoJHtmYWNlUmVjb2duaXRpb24uZ2V0TWF0Y2hRdWFsaXR5KGNvbmZpZGVuY2UpfSBtYXRjaClgXHJcbiAgICAgICAgOiAnTm8gbWF0Y2hpbmcgaWRlbnRpdHkgZm91bmQnXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTY2FuIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnU2NhbiBmYWlsZWQnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXZlbnRzID0gYXdhaXQgcHJpc21hLnNjYW5FdmVudC5maW5kTWFueSh7XHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGNhcmRJZDogdHJ1ZSxcclxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgICAgIHVzZXJUeXBlOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiAnZGVzYydcclxuICAgICAgfSxcclxuICAgICAgdGFrZTogNTBcclxuICAgIH0pXHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHN0YXRpc3RpY3NcclxuICAgIGNvbnN0IHRvdGFsU2NhbnMgPSBldmVudHMubGVuZ3RoXHJcbiAgICBjb25zdCBpZGVudGlmaWVkID0gZXZlbnRzLmZpbHRlcihlID0+IGUuc3RhdHVzID09PSBTY2FuU3RhdHVzLklERU5USUZJRUQpLmxlbmd0aFxyXG4gICAgY29uc3QgZGVuaWVkID0gZXZlbnRzLmZpbHRlcihlID0+IGUuc3RhdHVzID09PSBTY2FuU3RhdHVzLkRFTklFRCkubGVuZ3RoXHJcbiAgICBjb25zdCB2aXNpdG9ycyA9IGV2ZW50cy5maWx0ZXIoZSA9PiBlLnN0YXR1cyA9PT0gU2NhblN0YXR1cy5WSVNJVE9SKS5sZW5ndGhcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBldmVudHMsXHJcbiAgICAgIHN0YXRpc3RpY3M6IHtcclxuICAgICAgICB0b3RhbFNjYW5zLFxyXG4gICAgICAgIGlkZW50aWZpZWQsXHJcbiAgICAgICAgZGVuaWVkLFxyXG4gICAgICAgIHZpc2l0b3JzXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBldmVudHMgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggZXZlbnRzJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiVXNlclR5cGUiLCJTY2FuU3RhdHVzIiwiRmFjZVJlY29nbml0aW9uIiwiZmFjZVJlY29nbml0aW9uIiwiZ2V0SW5zdGFuY2UiLCJQT1NUIiwicmVxdWVzdCIsImZhY2VFbmNvZGluZyIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInZhbGlkYXRlRmFjZUVuY29kaW5nIiwidXNlcnMiLCJ1c2VyUHJvZmlsZSIsImZpbmRNYW55Iiwid2hlcmUiLCJPUiIsImV4cGlyZXNBdCIsImd0IiwiRGF0ZSIsIm1hdGNoIiwiZmluZEJlc3RNYXRjaCIsIm1hdGNoZWRVc2VyIiwiY29uZmlkZW5jZSIsImRpc3RhbmNlIiwidXNlciIsInVzZXJUeXBlIiwiVklTSVRPUiIsIklERU5USUZJRUQiLCJERU5JRUQiLCJzY2FuRXZlbnQiLCJjcmVhdGUiLCJkYXRhIiwidXNlcklkIiwiaWQiLCJpbmNsdWRlIiwic3VjY2VzcyIsIk1hdGgiLCJyb3VuZCIsIm1hdGNoUXVhbGl0eSIsImdldE1hdGNoUXVhbGl0eSIsImV2ZW50SWQiLCJtZXNzYWdlIiwibmFtZSIsImNvbnNvbGUiLCJHRVQiLCJldmVudHMiLCJzZWxlY3QiLCJjYXJkSWQiLCJlbWFpbCIsIm9yZGVyQnkiLCJ0aW1lc3RhbXAiLCJ0YWtlIiwidG90YWxTY2FucyIsImxlbmd0aCIsImlkZW50aWZpZWQiLCJmaWx0ZXIiLCJlIiwiZGVuaWVkIiwidmlzaXRvcnMiLCJzdGF0aXN0aWNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/scan/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/faceRecognition.ts":
/*!********************************!*\
  !*** ./lib/faceRecognition.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FaceRecognition: () => (/* binding */ FaceRecognition)\n/* harmony export */ });\n// Custom face recognition utility without external dependencies\nclass FaceRecognition {\n    static getInstance() {\n        if (!FaceRecognition.instance) {\n            FaceRecognition.instance = new FaceRecognition();\n        }\n        return FaceRecognition.instance;\n    }\n    // Simulate face encoding generation (128-dimensional vector)\n    generateFaceEncoding(seed) {\n        if (seed) {\n            // Deterministic encoding based on seed for consistent testing\n            const encoder = new TextEncoder();\n            const data = encoder.encode(seed);\n            const encoding = Array.from({\n                length: 128\n            }, (_, i)=>{\n                const val = data[i % data.length] / 255 * 2 - 1;\n                return val.toFixed(6);\n            }).join(\",\");\n            return btoa(encoding);\n        } else {\n            // Random encoding\n            const encoding = Array(128).fill(0).map(()=>(Math.random() * 2 - 1).toFixed(6)).join(\",\");\n            return btoa(encoding);\n        }\n    }\n    // Calculate Euclidean distance between two face encodings\n    calculateDistance(encoding1, encoding2) {\n        try {\n            const arr1 = atob(encoding1).split(\",\").map(Number);\n            const arr2 = atob(encoding2).split(\",\").map(Number);\n            if (arr1.length !== arr2.length || arr1.length !== 128) {\n                return 1.0 // Invalid encoding\n                ;\n            }\n            let sum = 0;\n            for(let i = 0; i < arr1.length; i++){\n                sum += Math.pow(arr1[i] - arr2[i], 2);\n            }\n            return Math.sqrt(sum);\n        } catch (error) {\n            return 1.0 // Maximum distance if error\n            ;\n        }\n    }\n    // Find best match from available users\n    findBestMatch(inputEncoding, users, threshold = 0.6) {\n        let bestMatch = null;\n        let minDistance = Infinity;\n        for (const user of users){\n            if (!user.faceEncoding) continue;\n            const distance = this.calculateDistance(inputEncoding, user.faceEncoding);\n            if (distance < minDistance) {\n                minDistance = distance;\n                bestMatch = {\n                    user,\n                    distance,\n                    confidence: Math.max(0, 1 - distance)\n                };\n            }\n        }\n        // Only return match if confidence meets threshold\n        if (bestMatch && bestMatch.confidence >= threshold) {\n            return bestMatch;\n        }\n        return null;\n    }\n    // Validate face encoding format\n    validateFaceEncoding(encoding) {\n        try {\n            const decoded = atob(encoding);\n            const numbers = decoded.split(\",\").map(Number);\n            return numbers.length === 128 && numbers.every((n)=>!isNaN(n) && n >= -1 && n <= 1);\n        } catch  {\n            return false;\n        }\n    }\n    // Get match quality description\n    getMatchQuality(confidence) {\n        if (confidence >= 0.9) return \"Excellent\";\n        if (confidence >= 0.8) return \"Very Good\";\n        if (confidence >= 0.7) return \"Good\";\n        if (confidence >= 0.6) return \"Fair\";\n        return \"Poor\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxLQUFLLE9BQU9xQyxRQUFRQyxLQUFLLENBQUNDLENBQUFBLElBQUssQ0FBQ0MsTUFBTUQsTUFBTUEsS0FBSyxDQUFDLEtBQUtBLEtBQUs7UUFDckYsRUFBRSxPQUFNO1lBQ0osT0FBTztRQUNYO0lBQ0o7SUFFQSxnQ0FBZ0M7SUFDekJFLGdCQUFnQlIsVUFBa0IsRUFBVTtRQUMvQyxJQUFJQSxjQUFjLEtBQUssT0FBTztRQUM5QixJQUFJQSxjQUFjLEtBQUssT0FBTztRQUM5QixJQUFJQSxjQUFjLEtBQUssT0FBTztRQUM5QixJQUFJQSxjQUFjLEtBQUssT0FBTztRQUM5QixPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2hib2FyZC8uL2xpYi9mYWNlUmVjb2duaXRpb24udHM/YTFhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDdXN0b20gZmFjZSByZWNvZ25pdGlvbiB1dGlsaXR5IHdpdGhvdXQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZhY2VNYXRjaCB7XHJcbiAgICB1c2VyOiBhbnlcclxuICAgIGRpc3RhbmNlOiBudW1iZXJcclxuICAgIGNvbmZpZGVuY2U6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjZVJlY29nbml0aW9uIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBGYWNlUmVjb2duaXRpb25cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IEZhY2VSZWNvZ25pdGlvbiB7XHJcbiAgICAgICAgaWYgKCFGYWNlUmVjb2duaXRpb24uaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRmFjZVJlY29nbml0aW9uLmluc3RhbmNlID0gbmV3IEZhY2VSZWNvZ25pdGlvbigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGYWNlUmVjb2duaXRpb24uaW5zdGFuY2VcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW11bGF0ZSBmYWNlIGVuY29kaW5nIGdlbmVyYXRpb24gKDEyOC1kaW1lbnNpb25hbCB2ZWN0b3IpXHJcbiAgICBwdWJsaWMgZ2VuZXJhdGVGYWNlRW5jb2Rpbmcoc2VlZD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHNlZWQpIHtcclxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5pc3RpYyBlbmNvZGluZyBiYXNlZCBvbiBzZWVkIGZvciBjb25zaXN0ZW50IHRlc3RpbmdcclxuICAgICAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVyLmVuY29kZShzZWVkKVxyXG4gICAgICAgICAgICBjb25zdCBlbmNvZGluZyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEyOCB9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gKGRhdGFbaSAlIGRhdGEubGVuZ3RoXSAvIDI1NSkgKiAyIC0gMVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbC50b0ZpeGVkKDYpXHJcbiAgICAgICAgICAgIH0pLmpvaW4oJywnKVxyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShlbmNvZGluZylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSYW5kb20gZW5jb2RpbmdcclxuICAgICAgICAgICAgY29uc3QgZW5jb2RpbmcgPSBBcnJheSgxMjgpXHJcbiAgICAgICAgICAgICAgICAuZmlsbCgwKVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoKSA9PiAoTWF0aC5yYW5kb20oKSAqIDIgLSAxKS50b0ZpeGVkKDYpKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJywnKVxyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShlbmNvZGluZylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBmYWNlIGVuY29kaW5nc1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVEaXN0YW5jZShlbmNvZGluZzE6IHN0cmluZywgZW5jb2RpbmcyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFycjEgPSBhdG9iKGVuY29kaW5nMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKVxyXG4gICAgICAgICAgICBjb25zdCBhcnIyID0gYXRvYihlbmNvZGluZzIpLnNwbGl0KCcsJykubWFwKE51bWJlcilcclxuXHJcbiAgICAgICAgICAgIGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGggfHwgYXJyMS5sZW5ndGggIT09IDEyOCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDEuMCAvLyBJbnZhbGlkIGVuY29kaW5nXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzdW0gPSAwXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3VtICs9IE1hdGgucG93KGFycjFbaV0gLSBhcnIyW2ldLCAyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoc3VtKVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxLjAgLy8gTWF4aW11bSBkaXN0YW5jZSBpZiBlcnJvclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIGJlc3QgbWF0Y2ggZnJvbSBhdmFpbGFibGUgdXNlcnNcclxuICAgIHB1YmxpYyBmaW5kQmVzdE1hdGNoKFxyXG4gICAgICAgIGlucHV0RW5jb2Rpbmc6IHN0cmluZyxcclxuICAgICAgICB1c2VyczogYW55W10sXHJcbiAgICAgICAgdGhyZXNob2xkOiBudW1iZXIgPSAwLjZcclxuICAgICk6IEZhY2VNYXRjaCB8IG51bGwge1xyXG4gICAgICAgIGxldCBiZXN0TWF0Y2g6IEZhY2VNYXRjaCB8IG51bGwgPSBudWxsXHJcbiAgICAgICAgbGV0IG1pbkRpc3RhbmNlID0gSW5maW5pdHlcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghdXNlci5mYWNlRW5jb2RpbmcpIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoaW5wdXRFbmNvZGluZywgdXNlci5mYWNlRW5jb2RpbmcpXHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZVxyXG4gICAgICAgICAgICAgICAgYmVzdE1hdGNoID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlkZW5jZTogTWF0aC5tYXgoMCwgMSAtIGRpc3RhbmNlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPbmx5IHJldHVybiBtYXRjaCBpZiBjb25maWRlbmNlIG1lZXRzIHRocmVzaG9sZFxyXG4gICAgICAgIGlmIChiZXN0TWF0Y2ggJiYgYmVzdE1hdGNoLmNvbmZpZGVuY2UgPj0gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiZXN0TWF0Y2hcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZmFjZSBlbmNvZGluZyBmb3JtYXRcclxuICAgIHB1YmxpYyB2YWxpZGF0ZUZhY2VFbmNvZGluZyhlbmNvZGluZzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoZW5jb2RpbmcpXHJcbiAgICAgICAgICAgIGNvbnN0IG51bWJlcnMgPSBkZWNvZGVkLnNwbGl0KCcsJykubWFwKE51bWJlcilcclxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcnMubGVuZ3RoID09PSAxMjggJiYgbnVtYmVycy5ldmVyeShuID0+ICFpc05hTihuKSAmJiBuID49IC0xICYmIG4gPD0gMSlcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBtYXRjaCBxdWFsaXR5IGRlc2NyaXB0aW9uXHJcbiAgICBwdWJsaWMgZ2V0TWF0Y2hRdWFsaXR5KGNvbmZpZGVuY2U6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGNvbmZpZGVuY2UgPj0gMC45KSByZXR1cm4gJ0V4Y2VsbGVudCdcclxuICAgICAgICBpZiAoY29uZmlkZW5jZSA+PSAwLjgpIHJldHVybiAnVmVyeSBHb29kJ1xyXG4gICAgICAgIGlmIChjb25maWRlbmNlID49IDAuNykgcmV0dXJuICdHb29kJ1xyXG4gICAgICAgIGlmIChjb25maWRlbmNlID49IDAuNikgcmV0dXJuICdGYWlyJ1xyXG4gICAgICAgIHJldHVybiAnUG9vcidcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJGYWNlUmVjb2duaXRpb24iLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiZ2VuZXJhdGVGYWNlRW5jb2RpbmciLCJzZWVkIiwiZW5jb2RlciIsIlRleHRFbmNvZGVyIiwiZGF0YSIsImVuY29kZSIsImVuY29kaW5nIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJ2YWwiLCJ0b0ZpeGVkIiwiam9pbiIsImJ0b2EiLCJmaWxsIiwibWFwIiwiTWF0aCIsInJhbmRvbSIsImNhbGN1bGF0ZURpc3RhbmNlIiwiZW5jb2RpbmcxIiwiZW5jb2RpbmcyIiwiYXJyMSIsImF0b2IiLCJzcGxpdCIsIk51bWJlciIsImFycjIiLCJzdW0iLCJwb3ciLCJzcXJ0IiwiZXJyb3IiLCJmaW5kQmVzdE1hdGNoIiwiaW5wdXRFbmNvZGluZyIsInVzZXJzIiwidGhyZXNob2xkIiwiYmVzdE1hdGNoIiwibWluRGlzdGFuY2UiLCJJbmZpbml0eSIsInVzZXIiLCJmYWNlRW5jb2RpbmciLCJkaXN0YW5jZSIsImNvbmZpZGVuY2UiLCJtYXgiLCJ2YWxpZGF0ZUZhY2VFbmNvZGluZyIsImRlY29kZWQiLCJudW1iZXJzIiwiZXZlcnkiLCJuIiwiaXNOYU4iLCJnZXRNYXRjaFF1YWxpdHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/faceRecognition.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n// lib/prisma.ts\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdCQUFnQjtBQUM2QjtBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Rhc2hib2FyZC8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvcHJpc21hLnRzXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWEiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CZhuanZ%5Cclis-system%5Cdashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();